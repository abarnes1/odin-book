<div class="modal is-active" data-controller='toggleable' data-toggleable-change-class='is-active' data-toggleable-target="toggle">
  <div class="modal-background" data-action="click->toggleable#toggle"></div>
  <div class="modal-card">
    <header class="modal-card-head has-background-black-ter">
      <p class="modal-card-title has-text-grey-lighter">Notifications</p>
      <button class="delete" aria-label="close" data-action="click->toggleable#toggle"></button>
    </header>

    <section class="modal-card-body has-background-black-ter has-text-grey-lighter">
      <% notifications.each do |notification| %>
        <%= turbo_frame_tag dom_id(notification) do %>
          <%= render layout: "notifications/modal_cards/#{notification.notifiable_type.underscore}_notification",  
          locals: { notification: notification, last: notifications.last.eql?(notification) } do %>
          
            <% unless notifications.last.eql?(notification) %>
              <hr class='has-background-grey'>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

      <%= turbo_frame_tag 'notifications_placeholder' do %>
        <% if notifications.empty? %>
          <p>No notifications.</p>
        <% end %>
      <% end %>
    </section>

    <% if false %>
      <footer class="modal-card-foot has-background-black-ter has-text-grey-lighter is-flex is-justify-content-end">
        <%= button_to 'View All', notifications_path, class: 'button is-success mr-0', method: :get %>
      </footer>
    <% end %>
  </div>
</div>